# # This Python file uses the following encoding: utf-8# !/usr/bin/env pythonimport osimport djangoos.environ.setdefault("DJANGO_SETTINGS_MODULE", "project_liveability.settings")django.setup()import loggingfrom collections import OrderedDictfrom liveability.models import Scores, TwoDishesOneSoupIdx, Employment, Weatherlog = logging.getLogger(__name__)if __name__ == "__main__":    weather = Weather.objects.all()    asdf = OrderedDict()    for x in weather:        asdf[x.district_en] = x.air_quality_health_index    d = OrderedDict(sorted(asdf.items(), key=lambda t: t[1]))    e = list(d.items())    i_min = e[0][1]    i_max = e[17][1]    print(i_min)    print(i_max)    for x in e:        scaled_score = (x[1] - i_min) / float(i_max - i_min) * 100        inversed_score = 100 - scaled_score        scores_set = Scores.objects.all()        for score in scores_set:            if score.district_en == x[0]:                # print(x[0])                score.air_quality = 60 + inversed_score * 40 /100                score.save()